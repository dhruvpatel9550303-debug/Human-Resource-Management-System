<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management | HR Harmony Hub</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="components/navbar.js"></script>
    <script src="components/sidebar.js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <custom-navbar></custom-navbar>
    <custom-sidebar></custom-sidebar>

    <main class="ml-64 p-8">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-2xl font-bold text-gray-800">Employee Management</h1>
            <button id="addEmployeeBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                <i data-feather="plus" class="w-4 h-4 mr-2"></i>
                Add Employee
            </button>
        </div>

        <!-- Employee Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Total Employees</p>
                        <h3 class="text-2xl font-bold mt-1" id="totalEmployees">0</h3>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                        <i data-feather="users" class="text-blue-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Active Today</p>
                        <h3 class="text-2xl font-bold mt-1" id="activeToday">0</h3>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                        <i data-feather="check-circle" class="text-green-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">On Leave</p>
                        <h3 class="text-2xl font-bold mt-1" id="onLeave">0</h3>
                    </div>
                    <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                        <i data-feather="calendar" class="text-yellow-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">New This Month</p>
                        <h3 class="text-2xl font-bold mt-1" id="newThisMonth">0</h3>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                        <i data-feather="user-plus" class="text-purple-600"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Table -->
        <div class="bg-white rounded-xl shadow-md">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h2 class="text-lg font-semibold">All Employees</h2>
                    <div class="flex gap-4">
                        <input type="text" id="searchInput" placeholder="Search employees..." class="border border-gray-300 rounded-lg px-4 py-2 text-sm">
                        <select id="departmentFilter" class="border border-gray-300 rounded-lg px-4 py-2 text-sm">
                            <option value="">All Departments</option>
                            <option value="Engineering">Engineering</option>
                            <option value="HR">HR</option>
                            <option value="Finance">Finance</option>
                            <option value="Marketing">Marketing</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Employee</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Join Date</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="employeesTable">
                        <!-- Employee data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Add New Employee</h3>
                    <button id="closeModalBtn" class="text-gray-400 hover:text-gray-600">
                        <i data-feather="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <form id="addEmployeeForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Employee ID</label>
                        <input type="text" id="empId" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Full Name</label>
                        <input type="text" id="empName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                        <input type="email" id="empEmail" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Department</label>
                        <select id="empDepartment" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                            <option value="">Select Department</option>
                            <option value="Engineering">Engineering</option>
                            <option value="HR">HR</option>
                            <option value="Finance">Finance</option>
                            <option value="Marketing">Marketing</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Position</label>
                        <input type="text" id="empPosition" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Join Date</label>
                        <input type="date" id="empJoinDate" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div class="flex justify-end gap-4">
                        <button type="button" id="cancelBtn" class="px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Add Employee</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        feather.replace();

        // Simulated employee data
        let employees = [
            { id: 'EMP-001', name: 'John Doe', email: 'john.doe@company.com', department: 'Engineering', position: 'Software Developer', status: 'Active', joinDate: '2020-01-15' },
            { id: 'EMP-002', name: 'Jane Smith', email: 'jane.smith@company.com', department: 'HR', position: 'HR Manager', status: 'Active', joinDate: '2019-03-10' },
            { id: 'EMP-003', name: 'Bob Johnson', email: 'bob.johnson@company.com', department: 'Finance', position: 'Accountant', status: 'On Leave', joinDate: '2021-06-20' },
            { id: 'EMP-004', name: 'Alice Brown', email: 'alice.brown@company.com', department: 'Marketing', position: 'Marketing Specialist', status: 'Active', joinDate: '2022-09-05' },
            { id: 'EMP-005', name: 'Charlie Wilson', email: 'charlie.wilson@company.com', department: 'Engineering', position: 'DevOps Engineer', status: 'Active', joinDate: '2021-11-12' }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            loadEmployees();
            updateStats();
            setupEventListeners();
        });

        function loadEmployees() {
            const tableBody = document.getElementById('employeesTable');
            tableBody.innerHTML = employees.map(emp => `
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10">
                                <div class="h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center">
                                    <span class="text-sm font-medium text-gray-700">${emp.name.split(' ').map(n => n[0]).join('')}</span>
                                </div>
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${emp.name}</div>
                                <div class="text-sm text-gray-500">${emp.email}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${emp.department}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${emp.position}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            ${emp.status === 'Active' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${emp.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${emp.joinDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button class="text-indigo-600 hover:text-indigo-900 mr-3" onclick="editEmployee('${emp.id}')">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteEmployee('${emp.id}')">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function updateStats() {
            document.getElementById('totalEmployees').textContent = employees.length;
            document.getElementById('activeToday').textContent = employees.filter(e => e.status === 'Active').length;
            document.getElementById('onLeave').textContent = employees.filter(e => e.status === 'On Leave').length;
            document.getElementById('newThisMonth').textContent = employees.filter(e => {
                const joinDate = new Date(e.joinDate);
                const now = new Date();
                return joinDate.getMonth() === now.getMonth() && joinDate.getFullYear() === now.getFullYear();
            }).length;
        }

        function setupEventListeners() {
            document.getElementById('addEmployeeBtn').addEventListener('click', () => {
                document.getElementById('addEmployeeModal').classList.remove('hidden');
            });

            document.getElementById('closeModalBtn').addEventListener('click', () => {
                document.getElementById('addEmployeeModal').classList.add('hidden');
            });

            document.getElementById('cancelBtn').addEventListener('click', () => {
                document.getElementById('addEmployeeModal').classList.add('hidden');
            });

            document.getElementById('addEmployeeForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const newEmployee = {
                    id: document.getElementById('empId').value,
                    name: document.getElementById('empName').value,
                    email: document.getElementById('empEmail').value,
                    department: document.getElementById('empDepartment').value,
                    position: document.getElementById('empPosition').value,
                    status: 'Active',
                    joinDate: document.getElementById('empJoinDate').value
                };
                employees.push(newEmployee);
                loadEmployees();
                updateStats();
                document.getElementById('addEmployeeModal').classList.add('hidden');
                document.getElementById('addEmployeeForm').reset();
            });

            document.getElementById('searchInput').addEventListener('input', filterEmployees);
            document.getElementById('departmentFilter').addEventListener('change', filterEmployees);
        }

        function filterEmployees() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const departmentFilter = document.getElementById('departmentFilter').value;

            const filtered = employees.filter(emp => {
                const matchesSearch = emp.name.toLowerCase().includes(searchTerm) || 
                                    emp.email.toLowerCase().includes(searchTerm) ||
                                    emp.position.toLowerCase().includes(searchTerm);
                const matchesDepartment = !departmentFilter || emp.department === departmentFilter;
                return matchesSearch && matchesDepartment;
            });

            const tableBody = document.getElementById('employeesTable');
            tableBody.innerHTML = filtered.map(emp => `
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10">
                                <div class="h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center">
                                    <span class="text-sm font-medium text-gray-700">${emp.name.split(' ').map(n => n[0]).join('')}</span>
                                </div>
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${emp.name}</div>
                                <div class="text-sm text-gray-500">${emp.email}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${emp.department}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${emp.position}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            ${emp.status === 'Active' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${emp.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${emp.joinDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button class="text-indigo-600 hover:text-indigo-900 mr-3" onclick="editEmployee('${emp.id}')">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteEmployee('${emp.id}')">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function editEmployee(id) {
            const employee = employees.find(e => e.id === id);
            if (employee) {
                // For demo, just alert. In real app, would open edit modal
                alert(`Edit functionality for ${employee.name} would be implemented here`);
            }
        }

        function deleteEmployee(id) {
            if (confirm('Are you sure you want to delete this employee?')) {
                employees = employees.filter(e => e.id !== id);
                loadEmployees();
                updateStats();
            }
        }
    </script>
</body>
</html>